---
title: Server Components
description: bae-proxy for cloud storage and headless mode for self-hosting
---

bae has two server-side components that serve different purposes: **bae-proxy** for cloud storage access, and **headless mode** for self-hosted library serving.

## bae-proxy

bae-proxy is a zero-knowledge encrypted blob proxy. It sits between clients and cloud storage, routing requests to the correct S3 bucket and prefix. It never decrypts anything -- all data passes through as opaque encrypted blobs. Decryption happens client-side (in bae-desktop, bae-web, or bae-mobile).

### How it works

bae-proxy reads a YAML registry file that maps hostnames to S3 prefixes. When a request comes in, it looks up the `Host` header, finds the corresponding S3 location, and proxies the request.

This registry is generated by the bae-cloud control plane. Each library gets its own hostname, scoped to its own S3 prefix. Libraries cannot access each other's data.

### Multi-tenant routing

A single bae-proxy instance handles many libraries. Routing is by `Host` header -- each library has its own subdomain. The proxy scopes all S3 operations to the library's prefix, enforcing isolation.

### What it serves

- Encrypted release files (audio, images, etc.)
- Encrypted database snapshots and sync changesets
- Encrypted library images
- [Share link](/library/share-links) data (bae-web fetches encrypted share data through bae-proxy, decrypts in the browser using the key from the URL fragment)

### What it does not do

bae-proxy has no knowledge of your library contents, metadata, or encryption keys. It cannot read, search, or index your music. It is a storage proxy, nothing more.

## Headless mode

`bae-desktop --headless` runs the same bae-desktop binary without the GUI. It starts a Subsonic API server and a sync loop, then runs until stopped with Ctrl+C.

This is for running bae on a home server, NAS, or VPS -- anywhere you want persistent library access without a display.

### What it does

- Serves your library over the Subsonic API (browse, search, stream)
- Runs the sync loop (pulls changesets from the cloud home, applies them)
- Serves library images

### CLI flags

| Flag | Purpose |
|---|---|
| `--headless` | Run without the GUI |
| `--port` | Port to listen on |
| `--bind` | Address to bind to (e.g., `0.0.0.0`) |

### Deployment

Run `bae-desktop --headless` on any machine with access to your library. A typical setup:

1. Run `bae-desktop --headless` on a VPS or home server
2. Point a domain at it (reverse proxy with nginx, Caddy, etc.)
3. The server syncs from your cloud home and serves the library

This gives you a public URL for [share links](/library/share-links) and [follow connections](/library/sharing#follow).

For users without a static IP or custom domain, options include Tailscale Funnel, ngrok, Cloudflare Tunnel, or UPnP port forwarding.

### Subsonic compatibility

Headless mode implements the Subsonic API. Any Subsonic-compatible client (DSub, Symfonium, play:Sub, Submariner, etc.) can connect to it and browse, search, and stream your library. No special client needed.

### Composing with the desktop app

bae-desktop (with GUI) and headless mode serve different roles:

- **bae-desktop** is the full app. It writes to the library, manages imports, edits metadata, and pushes changesets to the cloud home.
- **bae-desktop --headless** serves the library to remote clients. It syncs from the cloud home and exposes the Subsonic API.

You can run both. Desktop for local use and editing, headless for remote access and sharing. They do not interfere with each other -- desktop writes to the cloud home, headless reads from it.
